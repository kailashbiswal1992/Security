<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Visitor Management</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      background: #f3f6fa;
      margin: 0; padding: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background: #1e3a8a;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px 15px;
      gap: 10px;
    }
    header-logo { width: 56px; height: 56px; border-radius: 50%; object-fit: cover; box-shadow: 0 2px 12px rgba(0,0,0,0.13); border: 2px solid #fff; background: #fff; flex-shrink: 0; }
    header img {
      height: 40px;
      border-radius: 6px;
      background: white;
      padding: 2px;
    }
    header h1 {
      margin: 0;
      font-size: 1.5rem;
    }
    .container {
      flex: 1;
      max-width: 95%;
      margin: 20px auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    h2 {
      color: #1e3a8a;
      margin-bottom: 15px;
    }
    form {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 20px;
    }
    form label {
      display: none;
    }
    form input, form select, form button {
      padding: 12px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 1.1rem;
      min-height: 44px;
    }
    form button {
      background: #2563eb;
      color: white;
      border: none;
      cursor: pointer;
      grid-column: span 2;
      font-weight: bold;
    }
    form button:hover {
      background: #1e40af;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      font-size: 0.95rem;
    }
    table, th, td {
      border: 1px solid #ccc;
    }
    th, td {
      padding: 10px;
      text-align: center;
    }
    th {
      background: #2563eb;
      color: white;
    }
    button.out-btn {
      background: #dc2626;
      color: white;
      border: none;
      padding: 6px 10px;
      border-radius: 4px;
      cursor: pointer;
    }
    button.out-btn:hover {
      background: #b91c1c;
    }
    footer {
      background: #f1f5f9;
      text-align: center;
      padding: 10px;
      font-size: 0.85rem;
      color: #555;
      border-top: 1px solid #ddd;
    }

    /* Responsive styles */
    @media (max-width: 768px) {
      form { grid-template-columns: 1fr; }
      table { font-size: 0.85rem; display: block; overflow-x: auto; width: 100%; }
      .container { padding: 10px; }
      form input, form select, form button { font-size: 1.1rem; min-height: 44px; }
    }
    @media (max-width: 500px) {
      form label {
        display: block;
        margin-bottom: 3px;
        font-size: 0.95em;
        color: #2563eb;
      }
      form input, form select, form button {
        padding: 10px;
        font-size: 1rem;
      }
    }
    @media (max-width: 480px) {
      .container { padding: 4px; }
      h2 { font-size: 1.1rem; }
      header h1 { font-size: 1.2rem; }
      th, td { padding: 6px; }
    }
  </style>
  <!-- Firebase SDKs -->
  <script src="config.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>
  <header>
    <!-- ðŸ”¹ Replace logo.png with your actual logo path -->
    <img src="https://i.ibb.co/ZRNQxN5q/file-00000000777461fa82518c850f7680e9.png" alt="Logo">
    <h1>Visitor Management</h1>
  </header>

  <div class="container">
    <h2>âž• Add Visitor</h2>
    <form id="visitorForm" autocomplete="off">
      <label for="visitorType">Type</label>
      <select id="visitorType" required>
        <option value="">Select Visitor Type</option>
        <option value="Guest">Guest</option>
        <option value="Delivery Person">Delivery Person</option>
      </select>

      <label for="mobile">Mobile</label>
      <input type="text" id="mobile" placeholder="Mobile Number" required inputmode="tel" maxlength="15">

      <label for="name">Name</label>
      <input type="text" id="name" placeholder="Visitor Name" required>

      <label for="flat">Flat</label>
      <select id="flat" required>
        <option value="">Loading flats...</option>
      </select>

      <label for="purpose">Purpose</label>
      <input type="text" id="purpose" placeholder="Purpose of Visit" required>

      <label for="vehicle">Vehicle</label>
      <input type="text" id="vehicle" placeholder="Vehicle Number">

      <button type="submit">Add Visitor</button>
    </form>

    <h2>ðŸ“‹ Visitor Log</h2>
    <table id="visitorTable">
      <thead>
        <tr>
          <th>Date</th>
          <th>Type</th>
          <th>Name</th>
          <th>Mobile</th>
          <th>Flat</th>
          <th>Purpose</th>
          <th>Vehicle</th>
          <th>In-Time</th>
          <th>Out-Time</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    // Firebase + Visitor logic remains same as previous version...
    // (Use the corrected JS I shared earlier with Twilio + Firestore fixes)
  </script>
  <div style="
  position: fixed;
  bottom: 8px;
  right: 18px;
  font-size: 12px;
  color: #2563eb;
  opacity: 0.35;
  background: transparent;
  pointer-events: none;
  font-family: 'Poppins', Arial, sans-serif;
">
  v2025.1.0.1
</div>
</body>
</html>
